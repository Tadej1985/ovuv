<!doctype html>
<html lang="en">
<head>
Â  <meta charset="utf-8">
Â  <title>OVUV â€” Crypto Undervalued & Overvalued Tracker</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1">

Â  <meta name="description" content="OVUV â€” Discover the most undervalued and overvalued cryptocurrencies. Top 25 under and top 25 over, updated automatically every 8 hours using live market data from CoinCap, enhanced with Gemini's fundamental analysis.">
Â  <meta property="og:title" content="OVUV â€” Crypto Undervaluation Tracker">
Â  <meta property="og:description" content="Top 25 undervalued & overvalued cryptos. Updated every 8 hours using CoinCap data and Gemini fundamental analysis.">
Â  <meta property="og:type" content="website">

Â  <link rel="icon" type="image/x-icon" href="favicon.ico">

Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

Â  <style>
Â  Â  :root {
Â  Â  Â  --bg: #020617;
Â  Â  Â  --bg-card: #0f1220;
Â  Â  Â  --border: #1f2937;
Â  Â  Â  --text: #e5e7eb;
Â  Â  Â  --muted: #9ca3af;
Â  Â  Â  --accent-green: #22c55e;
Â  Â  Â  --accent-red: #ef4444;
Â  Â  Â  --accent-yellow: #f59e0b;
Â  Â  Â  --shadow: 0 20px 40px rgba(0,0,0,0.8);
Â  Â  }

Â  Â  * { box-sizing: border-box; }
Â  Â  html, body {
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  Â  font-family: 'Inter', system-ui, sans-serif;
Â  Â  Â  background: linear-gradient(135deg, #0f1220 0%, #020617 50%, #000 100%);
Â  Â  Â  color: var(--text);
Â  Â  }

Â  Â  header {
Â  Â  Â  padding: 1.5rem 1.5rem 1rem;
Â  Â  Â  background: rgba(2,6,23,0.95);
Â  Â  Â  border-bottom: 1px solid var(--border);
Â  Â  Â  backdrop-filter: blur(12px);
Â  Â  Â  position: sticky;
Â  Â  Â  top: 0;
Â  Â  Â  z-index: 20;
Â  Â  Â  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
Â  Â  }

Â  Â  h1 {
Â  Â  Â  margin: 0;
Â  Â  Â  font-size: 2rem;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: baseline;
Â  Â  Â  gap: 0.6rem;
Â  Â  Â  font-weight: 800;
Â  Â  }

Â  Â  .brand { font-weight: 800; letter-spacing: -0.02em; }
Â  Â  .brand .o { color: var(--accent-red); }
Â  Â  .brand .u { color: var(--accent-green); }

Â  Â  .tagline {
Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  color: var(--muted);
Â  Â  Â  margin-top: 0.6rem;
Â  Â  Â  line-height: 1.5;
Â  Â  Â  max-width: 900px;
Â  Â  }

Â  Â  main {
Â  Â  Â  max-width: 1920px;
Â  Â  Â  margin: 0 auto;
Â  Â  Â  padding: 2rem 1.5rem;
Â  Â  }

Â  Â  #status {
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  color: var(--muted);
Â  Â  Â  margin-bottom: 1rem;
Â  Â  Â  text-align: center;
Â  Â  Â  min-height: 1.5rem;
Â  Â  }

Â  Â  .banner-top {
Â  Â  Â  margin: 0 auto 2rem;
Â  Â  Â  padding: 1rem;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  background: linear-gradient(135deg, rgba(15,24,39,0.9) 0%, rgba(17,24,39,0.8) 100%);
Â  Â  Â  border: 1px solid rgba(250,204,21,0.2);
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  color: #fbbf24;
Â  Â  Â  max-width: 900px;
Â  Â  Â  box-shadow: 0 8px 24px rgba(250,204,21,0.05);
Â  Â  }

Â  Â  .container {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 2rem;
Â  Â  Â  align-items: flex-start;
Â  Â  Â  max-width: 1920px;
Â  Â  Â  margin: 0 auto;
Â  Â  }

Â  Â  .sidebar {
Â  Â  Â  width: 180px;
Â  Â  Â  flex-shrink: 0;
Â  Â  }

Â  Â  .banner-side {
Â  Â  Â  position: sticky;
Â  Â  Â  top: 8rem;
Â  Â  Â  padding: 1.2rem;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  background: linear-gradient(135deg, rgba(15,24,39,0.9) 0%, rgba(17,24,39,0.8) 100%);
Â  Â  Â  border: 1px solid rgba(250,204,21,0.2);
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  color: #fbbf24;
Â  Â  Â  min-height: 600px;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  box-shadow: 0 8px 24px rgba(250,204,21,0.05);
Â  Â  }

Â  Â  .content {
Â  Â  Â  flex: 1;
Â  Â  Â  min-width: 0;
Â  Â  }

Â  Â  .grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: 1fr 1fr;
Â  Â  Â  gap: 2rem;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  }

Â  Â  .card {
Â  Â  Â  background: rgba(15,18,32,0.95);
Â  Â  Â  border-radius: 16px;
Â  Â  Â  padding: 1.5rem;
Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  box-shadow: var(--shadow);
Â  Â  Â  backdrop-filter: blur(8px);
Â  Â  }

Â  Â  h2 {
Â  Â  Â  margin: 0 0 1rem;
Â  Â  Â  font-size: 1.15rem;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  font-weight: 700;
Â  Â  Â  letter-spacing: -0.01em;
Â  Â  }

Â  Â  .badge {
Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  padding: 0.25rem 0.75rem;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  border: 1px solid var(--accent-green);
Â  Â  Â  color: #bbf7d0;
Â  Â  Â  background: rgba(34,197,94,0.12);
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .badge.red {
Â  Â  Â  border-color: var(--accent-red);
Â  Â  Â  color: #fecaca;
Â  Â  Â  background: rgba(239,68,68,0.12);
Â  Â  }

Â  Â  .table-wrapper {
Â  Â  Â  overflow-y: auto;
Â  Â  Â  overflow-x: auto;
Â  Â  Â  max-height: 600px;
Â  Â  Â  border-radius: 10px;
Â  Â  }

Â  Â  table {
Â  Â  Â  width: 100%;
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  font-size: 0.85rem;
Â  Â  }

Â  Â  th, td {
Â  Â  Â  padding: 0.65rem 0.5rem;
Â  Â  Â  border-bottom: 1px solid rgba(31,41,55,0.5);
Â  Â  Â  text-align: right;
Â  Â  }

Â  Â  th:first-child, td:first-child,
Â  Â  th:nth-child(2), td:nth-child(2) {
Â  Â  Â  text-align: left;
Â  Â  }

Â  Â  th {
Â  Â  Â  position: sticky;
Â  Â  Â  top: 0;
Â  Â  Â  background: rgba(2,6,23,0.98);
Â  Â  Â  font-weight: 600;
Â  Â  Â  z-index: 1;
Â  Â  Â  color: var(--muted);
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  letter-spacing: 0.3px;
Â  Â  }

Â  Â  tr:nth-child(odd) { background: rgba(15,23,42,0.5); }
Â  Â  tr:nth-child(even) { background: rgba(15,23,42,0.35); }
Â  Â  tr:hover { background: rgba(31,41,55,0.4); transition: background 0.15s ease; }

Â  Â  footer {
Â  Â  Â  margin-top: 3rem;
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  color: var(--muted);
Â  Â  Â  text-align: center;
Â  Â  Â  padding-top: 1.5rem;
Â  Â  Â  border-top: 1px solid var(--border);
Â  Â  }

Â  Â  footer a {
Â  Â  Â  color: #60a5fa;
Â  Â  Â  text-decoration: none;
Â  Â  Â  transition: color 0.2s;
Â  Â  }

Â  Â  footer a:hover {
Â  Â  Â  color: #93c5fd;
Â  Â  }

Â  Â  @media (max-width: 1400px) {
Â  Â  Â  .grid {
Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  }
Â  Â  Â  .sidebar {
Â  Â  Â  Â  width: 160px;
Â  Â  Â  }
Â  Â  }

Â  Â  @media (max-width: 1024px) {
Â  Â  Â  .container {
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  }
Â  Â  Â  .sidebar {
Â  Â  Â  Â  width: 100%;
Â  Â  Â  }
Â  Â  Â  .banner-side {
Â  Â  Â  Â  min-height: auto;
Â  Â  Â  Â  padding: 2rem;
Â  Â  Â  }
Â  Â  Â  header {
Â  Â  Â  Â  padding: 1rem 1rem 0.6rem;
Â  Â  Â  }
Â  Â  Â  h1 {
Â  Â  Â  Â  font-size: 1.6rem;
Â  Â  Â  }
Â  Â  }

Â  Â  @media (max-width: 768px) {
Â  Â  Â  main {
Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  }
Â  Â  Â  .grid {
Â  Â  Â  Â  gap: 1.5rem;
Â  Â  Â  }
Â  Â  Â  .card {
Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  }
Â  Â  Â  h2 {
Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  gap: 0.5rem;
Â  Â  Â  }
Â  Â  Â  table {
Â  Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  }
Â  Â  Â  th, td {
Â  Â  Â  Â  padding: 0.4rem 0.3rem;
Â  Â  Â  }
Â  Â  Â  .table-wrapper {
Â  Â  Â  Â  max-height: 400px;
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>
<header>
Â  <h1>
Â  Â  <span class="brand"><span class="o">O</span>V<span class="u">U</span>V</span>
Â  Â  <span style="font-size:0.85rem;font-weight:500;color:#9ca3af;">crypto undervaluation tracker</span>
Â  </h1>
Â  <div class="tagline">
Â  Â  Top 25 most undervalued & top 25 most overvalued cryptocurrencies. Updated every 8 hours using live market data from <strong>CoinCap API</strong> and <strong>Gemini's fundamental analysis</strong>. Not financial advice.
Â  </div>
</header>

<main>
Â  <div id="status">Loading dataâ€¦</div>

Â  <div class="banner-top">
Â  Â  ğŸ“¢ Banner ad spot (728Ã—90 / responsive)
Â  </div>

Â  <div class="container">
Â  Â  <aside class="sidebar">
Â  Â  Â  <div class="banner-side">
Â  Â  Â  Â  <div>Left Banner<br />(160Ã—600)</div>
Â  Â  Â  </div>
Â  Â  </aside>

Â  Â  <div class="content">
Â  Â  Â  <div class="grid">
Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <h2>
Â  Â  Â  Â  Â  Â  <span>âš ï¸ Top 25 Overvalued</span>
Â  Â  Â  Â  Â  Â  <span class="badge red">Lowest Score</span>
Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  <div class="table-wrapper">
Â  Â  Â  Â  Â  Â  <div id="over-table">Loadingâ€¦</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  <h2>
Â  Â  Â  Â  Â  Â  <span>ğŸ† Top 25 Undervalued</span>
Â  Â  Â  Â  Â  Â  <span class="badge">Highest Score</span>
Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  <div class="table-wrapper">
Â  Â  Â  Â  Â  Â  <div id="under-table">Loadingâ€¦</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <aside class="sidebar">
Â  Â  Â  <div class="banner-side">
Â  Â  Â  Â  <div>Right Banner<br />(160Ã—600)</div>
Â  Â  Â  Â  <div id="detail-card"></div>
Â  Â  Â  </div>
Â  Â  </aside>
Â  </div>

Â  <footer>
Â  Â  Market data via <a href="https://coincap.io" target="_blank" rel="noopener">CoinCap API</a> â€¢ Fundamental analysis powered by <a href="https://gemini.google.com" target="_blank" rel="noopener">Google Gemini</a><br>
Â  Â  Undervaluation model is experimental and for informational purposes only. This is not financial advice.
Â  </footer>
</main>

<script>
// Helper function to format ISO date string to a readable time
function formatLastUpdated(isoString) {
    if (!isoString) return 'unknown time';
    const date = new Date(isoString);
    return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });
}

async function loadData() {
Â  const status = document.getElementById("status");
Â  try {
Â  Â  status.textContent = "Loading dataâ€¦";
Â  Â  // Add cache-buster to ensure fresh data.json on every load
Â  Â  const res = await fetch("data.json?cb=" + Date.now()); 
Â  Â  if (!res.ok) throw new Error("HTTP " + res.status);
    
Â  Â  const json = await res.json();
    
    // --- START OF FIX: Correctly read and separate data ---
    
    // 1. Get the list of all coins from the 'data' key
    const allCoins = json.data || []; 
    
    // 2. Separate coins into Undervalued and Overvalued lists
    const undervaluedCoins = allCoins.filter(coin => coin.category === 'Undervalued');
    const overvaluedCoins = allCoins.filter(coin => coin.category === 'Overvalued');
    
    // 3. Update status text using the 'generated_at' key
    const lastUpdateTime = formatLastUpdated(json.generated_at);
Â  Â  status.textContent = `Last updated: ${lastUpdateTime} â€” Next update in 8 hours`;
    
    // 4. Render the tables with the correct separated data
Â  Â  renderTables(undervaluedCoins, overvaluedCoins);
    
Â  } catch (e) {
Â  Â  console.error("Data loading error:", e);
Â  Â  status.textContent = `Error loading data: ${e.message}. Make sure 'data.json' is in the same directory and contains the correct structure.`;
Â  }
}

function formatNum(n, type) {
Â  const v = Number(n);
Â  if (!isFinite(v) || v === 0) return "-";
    
    // Handle price formatting
    if (type === 'price') {
        let priceDecimals = 2;
        if (Math.abs(v) < 1) priceDecimals = 4;
        if (Math.abs(v) < 0.0001 && Math.abs(v) > 0) return v.toExponential(2);
        return v.toFixed(priceDecimals);
    }
    
    // Handle Market Cap/Volume formatting (K/M/B)
Â  if (Math.abs(v) >= 1e9) return (v / 1e9).toFixed(2) + "B";
Â  if (Math.abs(v) >= 1e6) return (v / 1e6).toFixed(2) + "M";
Â  if (Math.abs(v) >= 1e3) return (v / 1e3).toFixed(2) + "K";
Â  return v.toFixed(0); // Market Cap should probably be rounded to 0 decimals for K/M/B
}


function renderTable(rows, tableId) {
Â  if (!rows || !rows.length) return "<p style='text-align:center;padding:1rem;'>No data to display in this category.</p>";

Â  let html = `<table>
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Score</th>
            <th>Price</th>
            <th>Market Cap</th>
            <th>24h %</th>
        </tr>
    </thead>
    <tbody>`;

Â  for (const r of rows) {
    // --- NOTE: Field names now match your JSON: price, market_cap, price_change_24h ---
Â  Â  const price = Number(r.price);
    const momentum = Number(r.price_change_24h);
    const fundamental_score = Number(r.fundamental_score);
    
    // Set color for 24h change
Â  Â  let momentumColor = 'inherit';
Â  Â  if (momentum > 0) {
Â  Â  Â  momentumColor = 'var(--accent-green)'; // Use CSS variable
Â  Â  } else if (momentum < 0) {
Â  Â  Â  momentumColor = 'var(--accent-red)'; // Use CSS variable
Â  Â  }

Â  Â  html += `<tr data-id="${r.id}" data-summary="${r.summary}">` + // Add data attributes for summary
Â  Â  Â  `<td>${r.rank}</td>` +
Â  Â  Â  `<td>${r.name}</td>` +
Â  Â  Â  `<td><strong>${fundamental_score.toFixed(1)}</strong></td>` + // Display score prominently
Â  Â  Â  `<td>$${formatNum(price, 'price')}</td>` +
Â  Â  Â  `<td>$${formatNum(r.market_cap, 'cap')}</td>` +
Â  Â  Â  `<td style="color:${momentumColor};">${momentum.toFixed(2)}%</td>` +
Â  Â  Â  "</tr>";
Â  }

Â  html += "</tbody></table>";
Â  return html;
}

function renderTables(under, over) {
Â  document.getElementById("under-table").innerHTML = renderTable(under, 'under-table');
Â  document.getElementById("over-table").innerHTML = renderTable(over, 'over-table');
    
    // Add event listeners for the new rows to display summaries
    document.querySelectorAll('tbody tr').forEach(row => {
        row.addEventListener('click', function() {
            displaySummary(this);
        });
    });
}

function displaySummary(rowElement) {
    const summary = rowElement.dataset.summary;
    const coinName = rowElement.querySelector('td:nth-child(2)').textContent;
    const detailCard = document.getElementById('detail-card');
    
    // Check if the card is already displaying this summary
    const currentName = detailCard.querySelector('h3') ? detailCard.querySelector('h3').textContent : '';

    // If clicking the same row, hide the summary to toggle it off
    if (currentName === coinName) {
        detailCard.innerHTML = '<div>Left Banner<br />(160Ã—600)</div>';
        detailCard.classList.remove('active');
        return;
    }

    // Otherwise, display the new summary
    detailCard.classList.add('active');
    detailCard.innerHTML = `
        <h3 style="margin-top:0; color:white;">${coinName} Analysis</h3>
        <p style="color:var(--muted);font-size:0.8rem;line-height:1.4;">${summary}</p>
        <p style="text-align:right;font-size:0.75rem;color:#4b5563;margin-bottom:0;">Click row again to dismiss.</p>
    `;
    // Scroll the sidebar to bring the detail card into view if needed
    detailCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

loadData();
</script>
</body>
</html>
